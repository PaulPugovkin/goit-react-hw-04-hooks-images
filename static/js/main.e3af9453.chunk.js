(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{39:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(6),o=a.n(r),s=a(5),i=a(3);var l=a(9),u=a.n(l),j=a(10),m={API_KEY:"22215457-d2e131747f34337528d5fbfaa",MAIN_URL:"https://pixabay.com/api/",PAGE:1,ITEMS_PER_PAGE:12};function h(){return(h=Object(j.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(m.MAIN_URL,"?key=").concat(m.API_KEY,"&q=").concat(t,"&page=").concat(m.PAGE,"&image_type=photo&orientation=horizontal&per_page=").concat(m.ITEMS_PER_PAGE));case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var d=function(e){return h.apply(this,arguments)},b=a(11),g=a(12),O=a.n(g),f=a(1),p=function(e){e.onSubmit;var t=e.onChange;return Object(f.jsx)("header",{className:"Searchbar",children:Object(f.jsxs)("form",{className:"SearchForm",type:"",children:[Object(f.jsx)("button",{className:"SearchForm-button",children:Object(f.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(f.jsx)("input",{className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",onChange:t})]})})},x=function(e){var t=e.src,a=e.alt,n=e.id,c=e.largeImage,r=e.onImageClick;return Object(f.jsx)(f.Fragment,{children:Object(f.jsx)("li",{className:"ImageGalleryItem",children:Object(f.jsx)("img",{src:t,"data-modal":c,alt:a,width:"300",height:"300",className:"ImageGalleryItem-image",onClick:r})},n)})},v=function(e){var t=e.hits,a=e.onImageClick;return Object(f.jsx)("ul",{className:"ImageGallery",children:t.map((function(e){return Object(f.jsx)(x,{largeImage:e.largeImageURL,src:e.webformatURL,alt:e.tags,onImageClick:a},e.id)}))})},I=document.getElementById("modal-root"),y=function(e){var t=e.onClose,a=e.handleBackdropClick,n=e.modalImage,c=e.modalAlt;return Object(r.createPortal)(Object(f.jsx)("div",{className:"Overlay",onClose:t,onClick:a,children:Object(f.jsx)("div",{className:"Modal",children:Object(f.jsx)("img",{src:n,alt:c})})}),I)};var E=function(){var e=Object(n.useState)(null),t=Object(i.a)(e,2),a=t[0],c=t[1],r=function(e,t){var a=Object(n.useState)(e),c=Object(i.a)(a,2),r=c[0],o=c[1];return Object(n.useEffect)((function(){var a=setTimeout((function(){o(e)}),t);return function(){clearTimeout(a)}}),[e,t]),r}(a,500),o=Object(n.useState)(""),l=Object(i.a)(o,2),u=l[0],j=l[1],h=Object(n.useState)([]),g=Object(i.a)(h,2),x=g[0],I=g[1],E=function(e){d(e).then((function(e){I((function(t){return t?[].concat(Object(s.a)(t),Object(s.a)(e.hits)):Object(s.a)(e.hits)})),j("resolved")})).then(j("pending")).catch((function(e){return console.log(e)}))};Object(n.useEffect)((function(){r&&(m.PAGE=1,r&&(I([]),E(r),window.scrollTo({top:document,behavior:"smooth"})))}),[r]);var S=Object(n.useState)(!1),k=Object(i.a)(S,2),w=k[0],C=k[1],A=Object(n.useState)(""),N=Object(i.a)(A,2),P=N[0],F=N[1],G=Object(n.useState)(""),_=Object(i.a)(G,2),L=_[0],M=_[1],R=function e(t){"Escape"===t.code&&T(),window.removeEventListener("keydown",e)},T=function(){F(""),M(""),C(!1)};return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(p,{onChange:function(e){c(e.target.value)}}),Object(f.jsx)(b.a,{dataLength:x.length,next:function(){m.PAGE+=1,E(r)},hasMore:!0,loader:"pending"===u&&Object(f.jsx)(O.a,{className:"spinner",type:"TailSpin",color:"#00BFFF",height:100,width:100}),endMessage:Object(f.jsx)("p",{style:{textAlign:"center"},children:Object(f.jsx)("b",{children:"Yay! You have seen it all"})}),children:Object(f.jsx)(v,{onImageClick:function(e){e.target.classList.contains("ImageGalleryItem-image")&&(F(e.target.dataset.modal),M(e.target.alt),C(!0),window.addEventListener("keydown",R))},hits:Object(s.a)(x)})}),w&&Object(f.jsx)(y,{modalAlt:L,modalImage:P,onClose:R,handleBackdropClick:function(e){e.target.classList.contains("Overlay")&&T()}})]})};a(39),a(40);o.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(E,{})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.e3af9453.chunk.js.map