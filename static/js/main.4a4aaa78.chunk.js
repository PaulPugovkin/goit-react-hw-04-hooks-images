(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{38:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),o=a(6),r=a.n(o),s=a(5),i=a(3);var l=a(9),u=a.n(l),j=a(10),m={API_KEY:"22215457-d2e131747f34337528d5fbfaa",MAIN_URL:"https://pixabay.com/api/",PAGE:1,ITEMS_PER_PAGE:12};function d(){return(d=Object(j.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(m.MAIN_URL,"?key=").concat(m.API_KEY,"&q=").concat(t,"&page=").concat(m.PAGE,"&image_type=photo&orientation=horizontal&per_page=").concat(m.ITEMS_PER_PAGE));case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var b=function(e){return d.apply(this,arguments)},h=a(11),g=a.n(h),O=a(0),f=function(e){e.onSubmit;var t=e.onChange;return Object(O.jsx)("header",{className:"Searchbar",children:Object(O.jsxs)("form",{className:"SearchForm",type:"",children:[Object(O.jsx)("button",{className:"SearchForm-button",children:Object(O.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(O.jsx)("input",{className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",onChange:t})]})})},p=function(e){var t=e.src,a=e.alt,n=e.id,c=e.largeImage,o=e.onImageClick;return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)("li",{className:"ImageGalleryItem",children:Object(O.jsx)("img",{src:t,"data-modal":c,alt:a,width:"300",height:"300",className:"ImageGalleryItem-image",onClick:o})},n)})},x=function(e){var t=e.hits,a=e.onImageClick;return Object(O.jsx)("ul",{className:"ImageGallery",children:t.map((function(e){return Object(O.jsx)(p,{largeImage:e.largeImageURL,src:e.webformatURL,alt:e.tags,onImageClick:a},e.id)}))})},v=function(e){var t=e.onLoadMore;return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)("button",{className:"Button",type:"button",onClick:t,children:"Load more"})})},I=document.getElementById("modal-root"),E=function(e){var t=e.onClose,a=e.handleBackdropClick,n=e.modalImage,c=e.modalAlt;return Object(o.createPortal)(Object(O.jsx)("div",{className:"Overlay",onClose:t,onClick:a,children:Object(O.jsx)("div",{className:"Modal",children:Object(O.jsx)("img",{src:n,alt:c})})}),I)};var k=function(){var e=Object(n.useState)(null),t=Object(i.a)(e,2),a=t[0],c=t[1],o=function(e,t){var a=Object(n.useState)(e),c=Object(i.a)(a,2),o=c[0],r=c[1];return Object(n.useEffect)((function(){var a=setTimeout((function(){r(e)}),t);return function(){clearTimeout(a)}}),[e,t]),o}(a,500),r=Object(n.useState)(""),l=Object(i.a)(r,2),u=l[0],j=l[1],d=Object(n.useState)(null),h=Object(i.a)(d,2),p=h[0],I=h[1],k=function(e,t){b(e).then((function(e){I((function(t){return t?[].concat(Object(s.a)(t),Object(s.a)(e.hits)):Object(s.a)(e.hits)})),j("resolved"),window.scrollTo({top:t,behavior:"smooth"})})).then(j("pending")).catch((function(e){return console.log(e)}))};Object(n.useEffect)((function(){o&&(m.PAGE=1,o&&(I(null),k(o,document)))}),[o]);var y=Object(n.useState)(!1),S=Object(i.a)(y,2),w=S[0],C=S[1],N=Object(n.useState)(""),A=Object(i.a)(N,2),F=A[0],L=A[1],P=Object(n.useState)(""),G=Object(i.a)(P,2),_=G[0],M=G[1],B=function e(t){"Escape"===t.code&&R(),window.removeEventListener("keydown",e)},R=function(){L(""),M(""),C(!1)};return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(f,{onChange:function(e){c(e.target.value)}}),p&&p.length>0&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(x,{onImageClick:function(e){e.target.classList.contains("ImageGalleryItem-image")&&(L(e.target.dataset.modal),M(e.target.alt),C(!0),window.addEventListener("keydown",B))},hits:Object(s.a)(p)}),Object(O.jsx)(v,{onLoadMore:function(){m.PAGE+=1,k(o,document.documentElement.scrollHeight)}})]}),w&&Object(O.jsx)(E,{modalAlt:_,modalImage:F,onClose:B,handleBackdropClick:function(e){e.target.classList.contains("Overlay")&&R()}}),"pending"===u&&Object(O.jsx)(g.a,{className:"spinner",type:"TailSpin",color:"#00BFFF",height:100,width:100})]})};a(38),a(39);r.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(k,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.4a4aaa78.chunk.js.map