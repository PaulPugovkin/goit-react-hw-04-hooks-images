{"version":3,"sources":["services/image-api.js","components/Searchbar/Searchbar.jsx","components/ImageGalleryItem/ImageGalleryItem.jsx","components/ImageGallery/ImageGallery.jsx","components/Modal/Modal.jsx","components/ScrollArrow/ScrollArrow.jsx","App.js","services/debounce.js","index.js"],"names":["fetchOptions","API_KEY","MAIN_URL","PAGE","ITEMS_PER_PAGE","value","a","fetch","fetching","json","result","fetchImages","Searchbar","onSubmit","onChange","className","type","autoComplete","autoFocus","placeholder","ImageGalleryItem","src","alt","id","largeImage","onImageClick","width","height","onClick","ImageGallery","hits","map","hit","largeImageURL","webformatURL","tags","modalRoot","document","getElementById","Modal","onClose","handleBackdropClick","modalImage","modalAlt","createPortal","ScrollArrow","useState","showScroll","setShowScroll","window","addEventListener","pageYOffset","scrollTo","top","behavior","style","display","App","searchQuery","setQuery","debouncedSearchQuery","delay","debouncedValue","setDebouncedValue","useEffect","handler","setTimeout","clearTimeout","useDebounce","status","setStatus","setHits","fetchImg","query","fetchingImages","then","res","prevState","catch","error","console","log","modal","setModalShown","setModalImage","setModalAlt","handleKeydown","e","code","resetModal","removeEventListener","target","dataLength","length","next","hasMore","loader","color","endMessage","textAlign","classList","contains","dataset","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.eadf550d.chunk.js","sourcesContent":["export const fetchOptions = {\r\n    API_KEY: '22215457-d2e131747f34337528d5fbfaa',\r\n    MAIN_URL: 'https://pixabay.com/api/',\r\n    PAGE: 1,\r\n    ITEMS_PER_PAGE: 12,\r\n};\r\n\r\nasync function fetchImages(value) {\r\n    const fetching = await fetch(\r\n        `${fetchOptions.MAIN_URL}?key=${fetchOptions.API_KEY}&q=${value}&page=${fetchOptions.PAGE}&image_type=photo&orientation=horizontal&per_page=${fetchOptions.ITEMS_PER_PAGE}`,\r\n    );\r\n    const result = await fetching.json();\r\n    return result;\r\n}\r\n\r\nexport default fetchImages;\r\n","const Searchbar = ({ onSubmit, onChange }) => {\r\n    return (\r\n        <header className=\"Searchbar\">\r\n            <form className=\"SearchForm\" type=\"\">\r\n                <button className=\"SearchForm-button\">\r\n                    <span className=\"SearchForm-button-label\">Search</span>\r\n                </button>\r\n\r\n                <input\r\n                    className=\"SearchForm-input\"\r\n                    type=\"text\"\r\n                    autoComplete=\"off\"\r\n                    autoFocus\r\n                    placeholder=\"Search images and photos\"\r\n                    onChange={onChange}\r\n                />\r\n            </form>\r\n        </header>\r\n    );\r\n};\r\n\r\nexport default Searchbar;\r\n","import PropTypes from 'prop-types';\r\n\r\nconst ImageGalleryItem = ({ src, alt, id, largeImage, onImageClick }) => {\r\n    return (\r\n        <>\r\n            <li className=\"ImageGalleryItem\" key={id}>\r\n                <img\r\n                    src={src}\r\n                    data-modal={largeImage}\r\n                    alt={alt}\r\n                    width=\"300\"\r\n                    height=\"300\"\r\n                    className=\"ImageGalleryItem-image\"\r\n                    onClick={onImageClick}\r\n                />\r\n            </li>\r\n        </>\r\n    );\r\n};\r\nImageGalleryItem.propTypes = {\r\n    src: PropTypes.string.isRequired,\r\n    alt: PropTypes.string.isRequired,\r\n    largeImage: PropTypes.string.isRequired,\r\n    onImageClick: PropTypes.func.isRequired,\r\n};\r\nexport default ImageGalleryItem;\r\n","import PropTypes from 'prop-types';\r\n\r\nimport ImageGalleryItem from '../ImageGalleryItem';\r\n\r\nconst ImageGallery = ({ hits, onImageClick }) => {\r\n    return (\r\n        <ul className=\"ImageGallery\">\r\n            {hits.map(hit => (\r\n                <ImageGalleryItem\r\n                    largeImage={hit.largeImageURL}\r\n                    key={hit.id}\r\n                    src={hit.webformatURL}\r\n                    alt={hit.tags}\r\n                    onImageClick={onImageClick}\r\n                />\r\n            ))}\r\n        </ul>\r\n    );\r\n};\r\nImageGallery.propTypes = {\r\n    hits: PropTypes.arrayOf(PropTypes.object).isRequired,\r\n    onImageClick: PropTypes.func.isRequired,\r\n};\r\nexport default ImageGallery;\r\n","import { createPortal } from 'react-dom';\r\n\r\nconst modalRoot = document.getElementById('modal-root');\r\n\r\nconst Modal = ({ onClose, handleBackdropClick, modalImage, modalAlt }) => {\r\n    return createPortal(\r\n        <div\r\n            className=\"Overlay\"\r\n            onClose={onClose}\r\n            onClick={handleBackdropClick}\r\n        >\r\n            <div className=\"Modal\">\r\n                <img src={modalImage} alt={modalAlt} />\r\n            </div>\r\n        </div>,\r\n        modalRoot,\r\n    );\r\n};\r\n\r\nexport default Modal;\r\n","import { useState } from 'react';\r\nimport { FaArrowCircleUp } from 'react-icons/fa';\r\n\r\nconst ScrollArrow = () => {\r\n    const [showScroll, setShowScroll] = useState(false);\r\n\r\n    const checkScrollTop = () => {\r\n        if (!showScroll && window.pageYOffset > 400) {\r\n            setShowScroll(true);\r\n        } else if (showScroll && window.pageYOffset <= 400) {\r\n            setShowScroll(false);\r\n        }\r\n    };\r\n\r\n    const scrollTop = () => {\r\n        window.scrollTo({ top: 0, behavior: 'smooth' });\r\n    };\r\n\r\n    window.addEventListener('scroll', checkScrollTop);\r\n\r\n    return (\r\n        <FaArrowCircleUp\r\n            className=\"scrollTop\"\r\n            onClick={scrollTop}\r\n            style={{ height: 60, display: showScroll ? 'flex' : 'none' }}\r\n        />\r\n    );\r\n};\r\n\r\nexport default ScrollArrow;\r\n","import React, { useState, useEffect } from 'react';\nimport useDebounce from './services/debounce';\nimport fetchingImages from './services/image-api';\nimport { fetchOptions } from './services/image-api';\n\nimport Searchbar from './components/Searchbar';\nimport ImageGallery from './components/ImageGallery';\nimport Modal from './components/Modal';\nimport Loader from 'react-loader-spinner';\nimport InfiniteScroll from 'react-infinite-scroll-component';\nimport ScrollArrow from './components/ScrollArrow';\n\nfunction App() {\n    const [searchQuery, setQuery] = useState(null);\n    const debouncedSearchQuery = useDebounce(searchQuery, 500);\n\n    const handleInputChange = e => {\n        setQuery(e.target.value);\n    };\n\n    const [status, setStatus] = useState('');\n    const [hits, setHits] = useState([]);\n\n    const fetchImg = query => {\n        fetchingImages(query)\n            .then(res => {\n                setHits(prevState =>\n                    !prevState ? [...res.hits] : [...prevState, ...res.hits],\n                );\n                setStatus('resolved');\n            })\n            .then(setStatus('pending'))\n            .catch(error => console.log(error));\n    };\n\n    useEffect(() => {\n        if (!debouncedSearchQuery) return;\n        fetchOptions.PAGE = 1;\n        if (debouncedSearchQuery) {\n            setHits([]);\n            fetchImg(debouncedSearchQuery);\n            window.scrollTo({\n                top: document,\n                behavior: 'smooth',\n            });\n        }\n    }, [debouncedSearchQuery]);\n\n    const onLoadMore = () => {\n        fetchOptions.PAGE += 1;\n        fetchImg(debouncedSearchQuery);\n    };\n\n    const [modal, setModalShown] = useState(false);\n    const [modalImage, setModalImage] = useState('');\n    const [modalAlt, setModalAlt] = useState('');\n\n    const onImageClick = e => {\n        if (!e.target.classList.contains('ImageGalleryItem-image')) return;\n        setModalImage(e.target.dataset.modal);\n        setModalAlt(e.target.alt);\n        setModalShown(true);\n        window.addEventListener('keydown', handleKeydown);\n    };\n\n    const handleBackdropClick = e => {\n        if (e.target.classList.contains('Overlay')) resetModal();\n        return;\n    };\n\n    const handleKeydown = e => {\n        if (e.code === 'Escape') resetModal();\n        window.removeEventListener('keydown', handleKeydown);\n    };\n\n    const resetModal = () => {\n        setModalImage('');\n        setModalAlt('');\n        setModalShown(false);\n    };\n\n    return (\n        <>\n            <Searchbar onChange={handleInputChange} />\n\n            <InfiniteScroll\n                dataLength={hits.length}\n                next={onLoadMore}\n                hasMore={true}\n                loader={\n                    status === 'pending' && (\n                        <Loader\n                            className=\"spinner\"\n                            type=\"TailSpin\"\n                            color=\"#00BFFF\"\n                            height={100}\n                            width={100}\n                        />\n                    )\n                }\n                endMessage={\n                    <p style={{ textAlign: 'center' }}>\n                        <b>Yay! You have seen it all</b>\n                    </p>\n                }\n            >\n                <ImageGallery onImageClick={onImageClick} hits={[...hits]} />\n            </InfiniteScroll>\n            {modal && (\n                <Modal\n                    modalAlt={modalAlt}\n                    modalImage={modalImage}\n                    onClose={handleKeydown}\n                    handleBackdropClick={handleBackdropClick}\n                />\n            )}\n            <ScrollArrow />\n        </>\n    );\n}\n\nexport default App;\n","import { useState, useEffect } from 'react';\r\n\r\nexport default function useDebounce(value, delay) {\r\n    const [debouncedValue, setDebouncedValue] = useState(value);\r\n\r\n    useEffect(() => {\r\n        const handler = setTimeout(() => {\r\n            setDebouncedValue(value);\r\n        }, delay);\r\n        return () => {\r\n            clearTimeout(handler);\r\n        };\r\n    }, [value, delay]);\r\n\r\n    return debouncedValue;\r\n}\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\n\nReactDOM.render(\n    <React.StrictMode>\n        <App />\n    </React.StrictMode>,\n    document.getElementById('root'),\n);\n"],"sourceRoot":""}