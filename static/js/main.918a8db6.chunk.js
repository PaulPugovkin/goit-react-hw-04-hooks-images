(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{40:function(e,t,a){},42:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),o=a(5),r=a.n(o),s=a(7),i=a(3);var l=a(9),u=a.n(l),j=a(10),d={API_KEY:"22215457-d2e131747f34337528d5fbfaa",MAIN_URL:"https://pixabay.com/api/",PAGE:1,ITEMS_PER_PAGE:12};function m(){return(m=Object(j.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(d.MAIN_URL,"?key=").concat(d.API_KEY,"&q=").concat(t,"&page=").concat(d.PAGE,"&image_type=photo&orientation=horizontal&per_page=").concat(d.ITEMS_PER_PAGE));case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var h=function(e){return m.apply(this,arguments)},b=a(1),g=function(e){e.onSubmit;var t=e.onChange;return Object(b.jsx)("header",{className:"Searchbar",children:Object(b.jsxs)("form",{className:"SearchForm",type:"",children:[Object(b.jsx)("button",{className:"SearchForm-button",children:Object(b.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(b.jsx)("input",{className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",onChange:t})]})})},O=function(e){var t=e.src,a=e.alt,n=e.id,c=e.largeImage,o=e.onImageClick;return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("li",{className:"ImageGalleryItem",children:Object(b.jsx)("img",{src:t,"data-modal":c,alt:a,width:"300",height:"300",className:"ImageGalleryItem-image",onClick:o})},n)})},f=function(e){var t=e.hits,a=e.onImageClick;return Object(b.jsx)("ul",{className:"ImageGallery",children:t.map((function(e){return Object(b.jsx)(O,{largeImage:e.largeImageURL,src:e.webformatURL,alt:e.tags,onImageClick:a},e.id)}))})},p=document.getElementById("modal-root"),x=function(e){var t=e.onClose,a=e.handleBackdropClick,n=e.modalImage,c=e.modalAlt;return Object(o.createPortal)(Object(b.jsx)("div",{className:"Overlay",onClose:t,onClick:a,children:Object(b.jsx)("div",{className:"Modal",children:Object(b.jsx)("img",{src:n,alt:c})})}),p)},v=a(11),w=a.n(v),I=a(12),y=a(13),E=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],c=t[1];return window.addEventListener("scroll",(function(){!a&&window.pageYOffset>400?c(!0):a&&window.pageYOffset<=400&&c(!1)})),Object(b.jsx)(y.a,{className:"scrollTop",onClick:function(){window.scrollTo({top:0,behavior:"smooth"})},style:{height:60,display:a?"flex":"none"}})};var S=function(){var e=Object(n.useState)(null),t=Object(i.a)(e,2),a=t[0],c=t[1],o=function(e,t){var a=Object(n.useState)(e),c=Object(i.a)(a,2),o=c[0],r=c[1];return Object(n.useEffect)((function(){var a=setTimeout((function(){r(e)}),t);return function(){clearTimeout(a)}}),[e,t]),o}(a,500),r=Object(n.useState)(""),l=Object(i.a)(r,2),u=l[0],j=l[1],m=Object(n.useState)([]),O=Object(i.a)(m,2),p=O[0],v=O[1],y=Object(n.useMemo)((function(){return p}),[p]),S=function(e){h(e).then((function(e){v((function(t){return t?[].concat(Object(s.a)(t),Object(s.a)(e.hits)):Object(s.a)(e.hits)})),j("resolved")})).then(j("pending")).catch((function(e){return console.log(e)}))};Object(n.useEffect)((function(){o&&(d.PAGE=1,o&&(v([]),S(o),window.scrollTo({top:document,behavior:"smooth"})))}),[o]);var k=Object(n.useState)(!1),C=Object(i.a)(k,2),N=C[0],A=C[1],P=Object(n.useState)(""),F=Object(i.a)(P,2),G=F[0],L=F[1],_=Object(n.useState)(""),M=Object(i.a)(_,2),T=M[0],R=M[1],Y=function e(t){"Escape"===t.code&&B(),window.removeEventListener("keydown",e)},B=function(){L(""),R(""),A(!1)};return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(g,{onChange:function(e){c(e.target.value)}}),Object(b.jsx)(I.a,{dataLength:p.length,next:function(){d.PAGE+=1,S(o)},hasMore:!0,loader:"pending"===u&&Object(b.jsx)(w.a,{className:"spinner",type:"TailSpin",color:"#00BFFF",height:100,width:100}),endMessage:Object(b.jsx)("p",{style:{textAlign:"center"},children:Object(b.jsx)("b",{children:"Yay! You have seen it all"})}),children:Object(b.jsx)(f,{onImageClick:function(e){e.target.classList.contains("ImageGalleryItem-image")&&(L(e.target.dataset.modal),R(e.target.alt),A(!0),window.addEventListener("keydown",Y))},hits:y})}),N&&Object(b.jsx)(x,{modalAlt:T,modalImage:G,onClose:Y,handleBackdropClick:function(e){e.target.classList.contains("Overlay")&&B()}}),Object(b.jsx)(E,{})]})};a(40),a(41);r.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(S,{})}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.918a8db6.chunk.js.map